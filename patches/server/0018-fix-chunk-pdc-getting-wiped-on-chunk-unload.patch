From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: evlad <emmanuelvlad@gmail.com>
Date: Thu, 19 Sep 2024 20:47:32 +0300
Subject: [PATCH] fix chunk pdc getting wiped on chunk unload


diff --git a/src/main/java/com/infernalsuite/asp/level/NMSSlimeChunk.java b/src/main/java/com/infernalsuite/asp/level/NMSSlimeChunk.java
index 844d23310b2b38cc9f6e2ae1636ba8a485c07999..c2dd10e46bd4c73b0db641b0a057e6e599033521 100644
--- a/src/main/java/com/infernalsuite/asp/level/NMSSlimeChunk.java
+++ b/src/main/java/com/infernalsuite/asp/level/NMSSlimeChunk.java
@@ -68,7 +68,9 @@ public class NMSSlimeChunk implements SlimeChunk {
 
     public NMSSlimeChunk(LevelChunk chunk, SlimeChunk reference) {
         this.chunk = chunk;
-        this.extra = reference == null ? new CompoundTag("", new CompoundMap()) : reference.getExtraData();
+        this.extra = new CompoundTag("", new CompoundMap());
+        extra.getValue().put(Converter.convertTag("ChunkBukkitValues", chunk.persistentDataContainer.toTagCompound()));
+
         this.upgradeData = reference == null ? null : reference.getUpgradeData();
     }
 
